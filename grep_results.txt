./.next/dev/server/chunks/ssr/[root-of-the-server]__4a4fb565._.js.map:    {"offset": {"line": 211, "column": 0}, "map": {"version":3,"sources":["file:///Users/thangtruong/Documents/internal-dashboard/app/%28dashboard%29/users/page.tsx"],"sourcesContent":["/* app/(dashboard)/users/page.tsx */\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { createClient } from \"@/lib/supabase/server\";\nimport { redirect } from \"next/navigation\";\nimport { UsersTable } from \"@/components/users/users-table\";\nimport { getUserRole } from \"@/lib/auth-helper\";\n\nexport default async function UsersPage() {\n  const supabase = await createClient();\n\n  // 1. Auth\n  const {\n    data: { user },\n  } = await supabase.auth.getUser();\n\n  if (!user) redirect(\"/login\");\n\n  // 2. Role\n  const userRole = await getUserRole(supabase, user.id);\n\n  // Only admins and owners can access this page\n  if (userRole !== \"admin\" && userRole !== \"owner\") {\n    redirect(\"/\");\n  }\n\n  let users: any[] | undefined;\n  let error: any = null;\n  let storesList: any[] = [];\n\n  if (userRole === \"admin\") {\n    // ============================\n    // ADMIN PATH\n    // ============================\n\n    // 1. Fetch base users + role\n    const {\n      data: serviceUsers,\n      error: serviceUsersError,\n    } = await supabase\n      .from(\"service_users\")\n      .select(\"id, role, created_at\")\n      .order(\"created_at\", { ascending: false });\n\n    console.log(\"ADMIN: serviceUsers =\", serviceUsers);\n\n    if (serviceUsersError) {\n      console.error(\"Error fetching service_users:\", serviceUsersError);\n      error = serviceUsersError;\n    }\n\n    // 2. Fetch admins, owners, clients (with store), stores in parallel\n    const [adminsRes, ownersRes, clientsRes, storesRes] = await Promise.all([\n      supabase.from(\"admins\").select(\"id, email, name\"),\n      supabase.from(\"owners\").select(\"id, email, name\"),\n      supabase\n        .from(\"clients\")\n        .select(\n          `\n          id,\n          email,\n          name,\n          store_id,\n          created_at,\n          store:stores (\n            id,\n            name,\n            owner_id\n          )\n        `\n        ),\n      supabase.from(\"stores\").select(\"id, name, owner_id\").order(\"name\"),\n    ]);\n\n    const admins = adminsRes.data || [];\n    const owners = ownersRes.data || [];\n    const clients = clientsRes.data || [];\n    const stores = storesRes.data || [];\n\n    console.log(\"ADMIN: admins =\", admins);\n    console.log(\"ADMIN: owners =\", owners);\n    console.log(\"ADMIN: clients (with store) =\", clients);\n    console.log(\"ADMIN: stores =\", stores);\n\n    if (adminsRes.error) console.error(\"Error fetching admins:\", adminsRes.error);\n    if (ownersRes.error) console.error(\"Error fetching owners:\", ownersRes.error);\n    if (clientsRes.error) console.error(\"Error fetching clients:\", clientsRes.error);\n    if (storesRes.error) console.error(\"Error fetching stores:\", storesRes.error);\n\n    storesList = stores; // for filters / UI\n\n    // 3. Build lookup maps\n    const adminsById: Record<string, any> = {};\n    admins.forEach((a) => {\n      adminsById[a.id] = a;\n    });\n\n    const ownersById: Record<string, any> = {};\n    owners.forEach((o) => {\n      ownersById[o.id] = o;\n    });\n\n    const clientsById: Record<string, any> = {};\n    clients.forEach((c) => {\n      clientsById[c.id] = c;\n    });\n\n    const storesById: Record<string, any> = {};\n    stores.forEach((s) => {\n      storesById[s.id] = s;\n    });\n\n    const storesByOwnerId: Record<string, any[]> = {};\n    stores.forEach((s) => {\n      if (!storesByOwnerId[s.owner_id]) {\n        storesByOwnerId[s.owner_id] = [];\n      }\n      storesByOwnerId[s.owner_id].push(s);\n    });\n\n    console.log(\"ADMIN: storesByOwnerId =\", storesByOwnerId);\n\n    // 4. Merge data per service_user\n    users =\n      serviceUsers?.map((u: any) => {\n        const admin = adminsById[u.id];\n        const owner = ownersById[u.id];\n        const client = clientsById[u.id];\n\n        let role: string = u.role;\n        let email: string | null = null;\n        let name: string | null = null;\n        let userStores: any[] = [];\n\n        if (admin) {\n          role = \"admin\";\n          email = admin.email;\n          name = admin.name;\n        } else if (owner) {\n          role = \"owner\";\n          email = owner.email;\n          name = owner.name;\n          userStores = storesByOwnerId[u.id] || [];\n        } else if (client) {\n          role = \"client\";\n          email = client.email;\n          name = client.name;\n\n          const clientStore =\n            (client as any).store ||\n            (client.store_id ? storesById[client.store_id] : null);\n\n          if (clientStore) {\n            userStores = [clientStore];\n          }\n        }\n\n        const storeNames = (userStores || [])\n          .map((s: any) => s?.name)\n          .filter(Boolean);\n        const primaryStoreName = storeNames[0] ?? null;\n\n        const mergedUser = {\n          id: u.id,\n          email: email || \"No Email\",\n          name: name || \"No Name\",\n          role,\n          created_at: u.created_at,\n          stores: userStores,          // full objects (id, name, owner_id)\n          storeNames,                  // [\"Store A\", \"Store B\", ...]\n          primaryStoreName,            // \"Store A\"\n        };\n\n        console.log(\"ADMIN: merged user =\", mergedUser);\n\n        return mergedUser;\n      }) || [];\n\n    // propagate any base error\n    error =\n      error ||\n      serviceUsersError ||\n      adminsRes.error ||\n      ownersRes.error ||\n      clientsRes.error ||\n      storesRes.error;\n  } else {\n    // ============================\n    // OWNER PATH\n    // ============================\n    console.log(\"=== USERS PAGE DEBUG (OWNER) ===\");\n\n    // 1. Get stores owned by this user\n    const { data: ownerStores, error: ownerStoresError } = await supabase\n      .from(\"stores\")\n      .select(\"id, name, owner_id\")\n      .eq(\"owner_id\", user.id);\n\n    console.log(\"OWNER: ownerStores =\", ownerStores);\n\n    if (ownerStoresError) {\n      console.error(\"Error fetching owner stores:\", ownerStoresError);\n    }\n\n    storesList = ownerStores || [];\n    const storeIds = (ownerStores || []).map((s) => s.id);\n\n    if (storeIds.length === 0) {\n      // No stores = no clients\n      users = [];\n      error = ownerStoresError ?? null;\n    } else {\n      // Build a map of store_id -> store object for quick lookup\n      const storeMap: Record<string, any> = {};\n      (ownerStores || []).forEach((s) => {\n        storeMap[s.id] = s;\n      });\n\n      console.log(\"OWNER: storeMap =\", storeMap);\n\n      // 2. Get clients whose store_id is in the owner's stores\n      const {\n        data: clientsData,\n        error: clientsError,\n      } = await supabase\n        .from(\"clients\")\n        .select(\"id, email, name, store_id, created_at\")\n        .in(\"store_id\", storeIds);\n\n      console.log(\"OWNER: clientsData =\", clientsData);\n\n      if (clientsError) {\n        console.error(\"Error fetching clients for owner:\", clientsError);\n      }\n\n      users =\n        clientsData?.map((c: any) => {\n          const store = c.store_id ? storeMap[c.store_id] : null;\n          const userStores = store ? [store] : [];\n\n          const storeNames = (userStores || [])\n            .map((s: any) => s?.name)\n            .filter(Boolean);\n          const primaryStoreName = storeNames[0] ?? null;\n\n          const mergedUser = {\n            id: c.id,\n            email: c.email || \"No Email\",\n            name: c.name || \"No Name\",\n            role: \"client\",\n            created_at: c.created_at,\n            store_id: c.store_id,\n            stores: userStores,\n            storeNames,\n            primaryStoreName,\n          };\n\n          console.log(\"OWNER: merged user =\", mergedUser);\n\n          return mergedUser;\n        }) || [];\n\n      error = clientsError || ownerStoresError || null;\n    }\n  }\n\n  console.log(\"Final users array:\", users);\n  console.log(\"Final error object:\", error);\n\n  if (error?.message) {\n    console.error(\"Error loading users:\", error);\n    return <div>Error loading users: {error.message}</div>;\n  }\n\n  return (\n    <div className=\"flex-1 space-y-4 p-8 pt-6\">\n      <div className=\"flex items-center justify-between space-y-2\">\n        <div>\n          <h2 className=\"text-3xl font-bold tracking-tight\">\n            {userRole === \"admin\" ? \"All Users\" : \"My Clients\"}\n          </h2>\n          <p className=\"text-muted-foreground\">\n            {userRole === \"admin\"\n              ? \"Manage all users and their roles\"\n              : \"View clients linked to your stores\"}\n          </p>\n        </div>\n      </div>\n\n      {/* UsersTable can now use user.storeNames or user.primaryStoreName to display stores */}\n      <UsersTable users={users || []} stores={storesList || []} />\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
./.next/dev/server/chunks/ssr/[root-of-the-server]__0b76a72c._.js.map:    {"offset": {"line": 70, "column": 0}, "map": {"version":3,"sources":["file:///Users/thangtruong/Documents/internal-dashboard/app/%28dashboard%29/users/page.tsx"],"sourcesContent":["/* app/(dashboard)/users/page.tsx */\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { createClient } from \"@/lib/supabase/server\";\nimport { redirect } from \"next/navigation\";\nimport { UsersTable } from \"@/components/users/users-table\";\nimport { getUserRole } from \"@/lib/auth-helper\";\n\nexport default async function UsersPage() {\n  const supabase = await createClient();\n\n  // 1. Auth\n  const {\n    data: { user },\n  } = await supabase.auth.getUser();\n\n  if (!user) redirect(\"/login\");\n\n  // 2. Role\n  const userRole = await getUserRole(supabase, user.id);\n\n  // Only admins and owners can access this page\n  if (userRole !== \"admin\" && userRole !== \"owner\") {\n    redirect(\"/\");\n  }\n\n  let users: any[] | undefined;\n  let error: any = null;\n  let storesList: any[] = [];\n\n  if (userRole === \"admin\") {\n    // ============================\n    // ADMIN PATH\n    // ============================\n\n    // 1. Fetch base users + role\n    const {\n      data: serviceUsers,\n      error: serviceUsersError,\n    } = await supabase\n      .from(\"service_users\")\n      .select(\"id, role, created_at\")\n      .order(\"created_at\", { ascending: false });\n\n    console.log(\"ADMIN: serviceUsers =\", serviceUsers);\n\n    if (serviceUsersError) {\n      console.error(\"Error fetching service_users:\", serviceUsersError);\n      error = serviceUsersError;\n    }\n\n    // 2. Fetch admins, owners, clients (with store), stores in parallel\n    const [adminsRes, ownersRes, clientsRes, storesRes] = await Promise.all([\n      supabase.from(\"admins\").select(\"id, email, name\"),\n      supabase.from(\"owners\").select(\"id, email, name\"),\n      supabase\n        .from(\"clients\")\n        .select(\n          `\n          id,\n          email,\n          name,\n          store_id,\n          created_at,\n          store:stores (\n            id,\n            name,\n            owner_id\n          )\n        `\n        ),\n      supabase.from(\"stores\").select(\"id, name, owner_id\").order(\"name\"),\n    ]);\n\n    const admins = adminsRes.data || [];\n    const owners = ownersRes.data || [];\n    const clients = clientsRes.data || [];\n    const stores = storesRes.data || [];\n\n    console.log(\"ADMIN: admins =\", admins);\n    console.log(\"ADMIN: owners =\", owners);\n    console.log(\"ADMIN: clients (with store) =\", clients);\n    console.log(\"ADMIN: stores =\", stores);\n\n    if (adminsRes.error) console.error(\"Error fetching admins:\", adminsRes.error);\n    if (ownersRes.error) console.error(\"Error fetching owners:\", ownersRes.error);\n    if (clientsRes.error) console.error(\"Error fetching clients:\", clientsRes.error);\n    if (storesRes.error) console.error(\"Error fetching stores:\", storesRes.error);\n\n    storesList = stores; // for filters / UI\n\n    // 3. Build lookup maps\n    const adminsById: Record<string, any> = {};\n    admins.forEach((a) => {\n      adminsById[a.id] = a;\n    });\n\n    const ownersById: Record<string, any> = {};\n    owners.forEach((o) => {\n      ownersById[o.id] = o;\n    });\n\n    const clientsById: Record<string, any> = {};\n    clients.forEach((c) => {\n      clientsById[c.id] = c;\n    });\n\n    const storesById: Record<string, any> = {};\n    stores.forEach((s) => {\n      storesById[s.id] = s;\n    });\n\n    const storesByOwnerId: Record<string, any[]> = {};\n    stores.forEach((s) => {\n      if (!storesByOwnerId[s.owner_id]) {\n        storesByOwnerId[s.owner_id] = [];\n      }\n      storesByOwnerId[s.owner_id].push(s);\n    });\n\n    console.log(\"ADMIN: storesByOwnerId =\", storesByOwnerId);\n\n    // 4. Merge data per service_user\n    users =\n      serviceUsers?.map((u: any) => {\n        const admin = adminsById[u.id];\n        const owner = ownersById[u.id];\n        const client = clientsById[u.id];\n\n        let role: string = u.role;\n        let email: string | null = null;\n        let name: string | null = null;\n        let userStores: any[] = [];\n\n        if (admin) {\n          role = \"admin\";\n          email = admin.email;\n          name = admin.name;\n        } else if (owner) {\n          role = \"owner\";\n          email = owner.email;\n          name = owner.name;\n          userStores = storesByOwnerId[u.id] || [];\n        } else if (client) {\n          role = \"client\";\n          email = client.email;\n          name = client.name;\n\n          const clientStore =\n            (client as any).store ||\n            (client.store_id ? storesById[client.store_id] : null);\n\n          if (clientStore) {\n            userStores = [clientStore];\n          }\n        }\n\n        const storeNames = (userStores || [])\n          .map((s: any) => s?.name)\n          .filter(Boolean);\n        const primaryStoreName = storeNames[0] ?? null;\n\n        const mergedUser = {\n          id: u.id,\n          email: email || \"No Email\",\n          name: name || \"No Name\",\n          role,\n          created_at: u.created_at,\n          stores: userStores,          // full objects (id, name, owner_id)\n          storeNames,                  // [\"Store A\", \"Store B\", ...]\n          primaryStoreName,            // \"Store A\"\n        };\n\n        console.log(\"ADMIN: merged user =\", mergedUser);\n\n        return mergedUser;\n      }) || [];\n\n    // propagate any base error\n    error =\n      error ||\n      serviceUsersError ||\n      adminsRes.error ||\n      ownersRes.error ||\n      clientsRes.error ||\n      storesRes.error;\n  } else {\n    // ============================\n    // OWNER PATH\n    // ============================\n    console.log(\"=== USERS PAGE DEBUG (OWNER) ===\");\n\n    // 1. Get stores owned by this user\n    const { data: ownerStores, error: ownerStoresError } = await supabase\n      .from(\"stores\")\n      .select(\"id, name, owner_id\")\n      .eq(\"owner_id\", user.id);\n\n    console.log(\"OWNER: ownerStores =\", ownerStores);\n\n    if (ownerStoresError) {\n      console.error(\"Error fetching owner stores:\", ownerStoresError);\n    }\n\n    storesList = ownerStores || [];\n    const storeIds = (ownerStores || []).map((s) => s.id);\n\n    if (storeIds.length === 0) {\n      // No stores = no clients\n      users = [];\n      error = ownerStoresError ?? null;\n    } else {\n      // Build a map of store_id -> store object for quick lookup\n      const storeMap: Record<string, any> = {};\n      (ownerStores || []).forEach((s) => {\n        storeMap[s.id] = s;\n      });\n\n      console.log(\"OWNER: storeMap =\", storeMap);\n\n      // 2. Get clients whose store_id is in the owner's stores\n      const {\n        data: clientsData,\n        error: clientsError,\n      } = await supabase\n        .from(\"clients\")\n        .select(\"id, email, name, store_id, created_at\")\n        .in(\"store_id\", storeIds);\n\n      console.log(\"OWNER: clientsData =\", clientsData);\n\n      if (clientsError) {\n        console.error(\"Error fetching clients for owner:\", clientsError);\n      }\n\n      users =\n        clientsData?.map((c: any) => {\n          const store = c.store_id ? storeMap[c.store_id] : null;\n          const userStores = store ? [store] : [];\n\n          const storeNames = (userStores || [])\n            .map((s: any) => s?.name)\n            .filter(Boolean);\n          const primaryStoreName = storeNames[0] ?? null;\n\n          const mergedUser = {\n            id: c.id,\n            email: c.email || \"No Email\",\n            name: c.name || \"No Name\",\n            role: \"client\",\n            created_at: c.created_at,\n            store_id: c.store_id,\n            stores: userStores,\n            storeNames,\n            primaryStoreName,\n          };\n\n          console.log(\"OWNER: merged user =\", mergedUser);\n\n          return mergedUser;\n        }) || [];\n\n      error = clientsError || ownerStoresError || null;\n    }\n  }\n\n  console.log(\"Final users array:\", users);\n  console.log(\"Final error object:\", error);\n\n  if (error?.message) {\n    console.error(\"Error loading users:\", error);\n    return <div>Error loading users: {error.message}</div>;\n  }\n\n  return (\n    <div className=\"flex-1 space-y-4 p-8 pt-6\">\n      <div className=\"flex items-center justify-between space-y-2\">\n        <div>\n          <h2 className=\"text-3xl font-bold tracking-tight\">\n            {userRole === \"admin\" ? \"All Users\" : \"My Clients\"}\n          </h2>\n          <p className=\"text-muted-foreground\">\n            {userRole === \"admin\"\n              ? \"Manage all users and their roles\"\n              : \"View clients linked to your stores\"}\n          </p>\n        </div>\n      </div>\n\n      {/* UsersTable can now use user.storeNames or user.primaryStoreName to display stores */}\n      <UsersTable users={users || []} stores={storesList || []} />\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
./.next/dev/server/chunks/ssr/[root-of-the-server]__afecdcf2._.js.map:    {"offset": {"line": 34, "column": 0}, "map": {"version":3,"sources":["file:///Users/thangtruong/Documents/internal-dashboard/app/%28dashboard%29/users/page.tsx"],"sourcesContent":["import { createClient } from \"@/lib/supabase/server\";\nimport { redirect } from \"next/navigation\";\nimport { UsersTable } from \"@/components/users/users-table\";\n\nexport default async function UsersPage() {\n  const supabase = await createClient();\n  \n  // Check auth and role\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) redirect(\"/login\");\n\n  const { data: currentUserData } = await supabase\n    .from(\"service_users\")\n    .select(\"role\")\n    .eq(\"id\", user.id)\n    .single();\n\n  const userRole = currentUserData?.role;\n\n  // Admins and owners can access this page\n  if (userRole !== \"admin\" && userRole !== \"owner\") {\n    redirect(\"/\");\n  }\n\n  let users;\n  let error;\n  let storesList;\n\n  if (userRole === \"admin\") {\n    // Fetch all stores for filter\n    const { data: allStores } = await supabase\n      .from(\"stores\")\n      .select(\"id, name\")\n      .order(\"name\");\n    storesList = allStores || [];\n\n    // Admins see ALL users\n    const result = await supabase\n      .from(\"service_users\")\n      .select(`\n        *,\n        stores!store_id (\n          name\n        )\n      `);\n    users = result.data;\n    error = result.error;\n  } else {\n    // Owners see only CLIENTS associated with their stores\n    console.log(\"=== USERS PAGE DEBUG (OWNER) ===\");\n    console.log(\"1. Current owner_id (user.id):\", user.id);\n    console.log(\"   Owner email:\", user.email);\n    \n    // First get owner's store IDs\n    const { data: ownerStores, error: storesError } = await supabase\n      .from(\"stores\")\n      .select(\"id, name\")\n      .eq(\"owner_id\", user.id);\n\n    console.log(\"2. Stores owned by this user:\");\n    console.log(\"   Query: SELECT id, name FROM stores WHERE owner_id =\", user.id);\n    console.log(\"   Result:\", ownerStores);\n    console.log(\"   Error:\", storesError);\n\n    // Set stores list for filter\n    storesList = ownerStores || [];\n\n    const storeIds = ownerStores?.map(s => s.id) || [];\n    console.log(\"3. Extracted store_ids:\", storeIds);\n\n    if (storeIds.length === 0) {\n      console.log(\"4. No stores found for this owner. Returning empty users.\");\n      // No stores for this owner, return empty users\n      users = [];\n      error = null;\n    } else {\n      console.log(\"4. Querying service_users for clients with these store_ids...\");\n      console.log(\"   Query: SELECT * FROM service_users WHERE role='client' AND store_id IN\", storeIds);\n      \n      // Then get clients for those stores\n      const result = await supabase\n        .from(\"service_users\")\n        .select(`\n          *,\n          stores!store_id (\n            name\n          )\n        `)\n        .eq(\"role\", \"client\")\n        .in(\"store_id\", storeIds);\n      \n      console.log(\"5. Client users result:\");\n      console.log(\"   Data:\", result.data);\n      console.log(\"   Error:\", result.error);\n      console.log(\"   Count:\", result.data?.length || 0);\n      \n      users = result.data;\n      error = result.error;\n    }\n    console.log(\"=== END DEBUG ===\");\n  }\n\n  console.log(\"Final users:\", users);\n  console.log(\"Final error:\", error);\n\n  if (error?.message) {\n    console.error(\"Error fetching users:\", error);\n    return <div>Error loading users: {error.message}</div>;\n  }\n\n  return (\n    <div className=\"flex-1 space-y-4 p-8 pt-6\">\n      <div className=\"flex items-center justify-between space-y-2\">\n        <div>\n          <h2 className=\"text-3xl font-bold tracking-tight\">\n            {userRole === \"admin\" ? \"All Users\" : \"My Clients\"}\n          </h2>\n          <p className=\"text-muted-foreground\">\n            {userRole === \"admin\" ? \"Manage all users and their roles\" : \"View clients linked to your stores\"}\n          </p>\n        </div>\n      </div>\n      <div className=\"rounded-md border bg-card text-card-foreground shadow-sm\">\n        <div className=\"p-6\">\n          <div className=\"relative w-full overflow-auto\">\n            <table className=\"w-full caption-bottom text-sm\">\n              <thead className=\"[&_tr]:border-b\">\n                <tr className=\"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\">\n                  <th className=\"h-12 px-4 text-left align-middle font-medium text-muted-foreground\">\n                    User\n                  </th>\n                  <th className=\"h-12 px-4 text-left align-middle font-medium text-muted-foreground\">\n                    Email\n                  </th>\n                  <th className=\"h-12 px-4 text-left align-middle font-medium text-muted-foreground\">\n                    Stores\n                  </th>\n                  <th className=\"h-12 px-4 text-left align-middle font-medium text-muted-foreground\">\n                    Store Names\n                  </th>\n                  <th className=\"h-12 px-4 text-left align-middle font-medium text-muted-foreground\">\n                    Role\n                  </th>\n                  <th className=\"h-12 px-4 text-left align-middle font-medium text-muted-foreground\">\n                    Joined\n                  </th>\n                </tr>\n              </thead>\n              <tbody className=\"[&_tr:last-child]:border-0\">\n                {users?.map((user: any) => (\n                  <tr\n                    key={user.id}\n                    className=\"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\"\n                  >\n                    <td className=\"p-4 align-middle\">\n                      <div className=\"flex items-center gap-2\">\n                        <div className=\"h-8 w-8 rounded-full bg-muted flex items-center justify-center\">\n                          <User className=\"h-4 w-4\" />\n                        </div>\n                        {/* Name is not in service_users table yet, using email or metadata if available */}\n                        <span className=\"font-medium\">User</span> \n                      </div>\n                    </td>\n                    <td className=\"p-4 align-middle\">\n                      {user.email}\n                    </td>\n                    <td className=\"p-4 align-middle\">\n                      <div className=\"flex items-center gap-2\">\n                        <Store className=\"h-4 w-4 text-primary\" />\n                        <span className=\"font-semibold\">{user.stores?.name ? \"1\" : \"0\"}</span>\n                      </div>\n                    </td>\n                    <td className=\"p-4 align-middle\">\n                      {user.stores?.name || \"No store assigned\"}\n                    </td>\n                    <td className=\"p-4 align-middle\">\n                      <div className=\"flex items-center gap-2\">\n                        {user.role === \"admin\" && (\n                          <Shield className=\"h-4 w-4 text-blue-500\" />\n                        )}\n                        <span className=\"capitalize\">{user.role}</span>\n                      </div>\n                    </td>\n                    <td className=\"p-4 align-middle text-muted-foreground\">\n                      {new Date(user.created_at).toLocaleDateString()}\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAAA;;;;AAGe,eAAe;IAC5B,MAAM,WAAW,MAAM,IAAA,kKAAY;IAEnC,sBAAsB;IACtB,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IACtD,IAAI,CAAC,MAAM,IAAA,0NAAQ,EAAC;IAEpB,MAAM,EAAE,MAAM,eAAe,EAAE,GAAG,MAAM,SACrC,IAAI,CAAC,iBACL,MAAM,CAAC,QACP,EAAE,CAAC,MAAM,KAAK,EAAE,EAChB,MAAM;IAET,MAAM,WAAW,iBAAiB;IAElC,yCAAyC;IACzC,IAAI,aAAa,WAAW,aAAa,SAAS;QAChD,IAAA,0NAAQ,EAAC;IACX;IAEA,IAAI;IACJ,IAAI;IACJ,IAAI;IAEJ,IAAI,aAAa,SAAS;QACxB,8BAA8B;QAC9B,MAAM,EAAE,MAAM,SAAS,EAAE,GAAG,MAAM,SAC/B,IAAI,CAAC,UACL,MAAM,CAAC,YACP,KAAK,CAAC;QACT,aAAa,aAAa,EAAE;QAE5B,uBAAuB;QACvB,MAAM,SAAS,MAAM,SAClB,IAAI,CAAC,iBACL,MAAM,CAAC,CAAC;;;;;MAKT,CAAC;QACH,QAAQ,OAAO,IAAI;QACnB,QAAQ,OAAO,KAAK;IACtB,OAAO;QACL,uDAAuD;QACvD,QAAQ,GAAG,CAAC;QACZ,QAAQ,GAAG,CAAC,kCAAkC,KAAK,EAAE;QACrD,QAAQ,GAAG,CAAC,mBAAmB,KAAK,KAAK;QAEzC,8BAA8B;QAC9B,MAAM,EAAE,MAAM,WAAW,EAAE,OAAO,WAAW,EAAE,GAAG,MAAM,SACrD,IAAI,CAAC,UACL,MAAM,CAAC,YACP,EAAE,CAAC,YAAY,KAAK,EAAE;QAEzB,QAAQ,GAAG,CAAC;QACZ,QAAQ,GAAG,CAAC,0DAA0D,KAAK,EAAE;QAC7E,QAAQ,GAAG,CAAC,cAAc;QAC1B,QAAQ,GAAG,CAAC,aAAa;QAEzB,6BAA6B;QAC7B,aAAa,eAAe,EAAE;QAE9B,MAAM,WAAW,aAAa,IAAI,CAAA,IAAK,EAAE,EAAE,KAAK,EAAE;QAClD,QAAQ,GAAG,CAAC,2BAA2B;QAEvC,IAAI,SAAS,MAAM,KAAK,GAAG;YACzB,QAAQ,GAAG,CAAC;YACZ,+CAA+C;YAC/C,QAAQ,EAAE;YACV,QAAQ;QACV,OAAO;YACL,QAAQ,GAAG,CAAC;YACZ,QAAQ,GAAG,CAAC,6EAA6E;YAEzF,oCAAoC;YACpC,MAAM,SAAS,MAAM,SAClB,IAAI,CAAC,iBACL,MAAM,CAAC,CAAC;;;;;QAKT,CAAC,EACA,EAAE,CAAC,QAAQ,UACX,EAAE,CAAC,YAAY;YAElB,QAAQ,GAAG,CAAC;YACZ,QAAQ,GAAG,CAAC,YAAY,OAAO,IAAI;YACnC,QAAQ,GAAG,CAAC,aAAa,OAAO,KAAK;YACrC,QAAQ,GAAG,CAAC,aAAa,OAAO,IAAI,EAAE,UAAU;YAEhD,QAAQ,OAAO,IAAI;YACnB,QAAQ,OAAO,KAAK;QACtB;QACA,QAAQ,GAAG,CAAC;IACd;IAEA,QAAQ,GAAG,CAAC,gBAAgB;IAC5B,QAAQ,GAAG,CAAC,gBAAgB;IAE5B,IAAI,OAAO,SAAS;QAClB,QAAQ,KAAK,CAAC,yBAAyB;QACvC,qBAAO,uQAAC;;gBAAI;gBAAsB,MAAM,OAAO;;;;;;;IACjD;IAEA,qBACE,uQAAC;QAAI,WAAU;;0BACb,uQAAC;gBAAI,WAAU;0BACb,cAAA,uQAAC;;sCACC,uQAAC;4BAAG,WAAU;sCACX,aAAa,UAAU,cAAc;;;;;;sCAExC,uQAAC;4BAAE,WAAU;sCACV,aAAa,UAAU,qCAAqC;;;;;;;;;;;;;;;;;0BAInE,uQAAC;gBAAI,WAAU;0BACb,cAAA,uQAAC;oBAAI,WAAU;8BACb,cAAA,uQAAC;wBAAI,WAAU;kCACb,cAAA,uQAAC;4BAAM,WAAU;;8CACf,uQAAC;oCAAM,WAAU;8CACf,cAAA,uQAAC;wCAAG,WAAU;;0DACZ,uQAAC;gDAAG,WAAU;0DAAqE;;;;;;0DAGnF,uQAAC;gDAAG,WAAU;0DAAqE;;;;;;0DAGnF,uQAAC;gDAAG,WAAU;0DAAqE;;;;;;0DAGnF,uQAAC;gDAAG,WAAU;0DAAqE;;;;;;0DAGnF,uQAAC;gDAAG,WAAU;0DAAqE;;;;;;0DAGnF,uQAAC;gDAAG,WAAU;0DAAqE;;;;;;;;;;;;;;;;;8CAKvF,uQAAC;oCAAM,WAAU;8CACd,OAAO,IAAI,CAAC,qBACX,uQAAC;4CAEC,WAAU;;8DAEV,uQAAC;oDAAG,WAAU;8DACZ,cAAA,uQAAC;wDAAI,WAAU;;0EACb,uQAAC;gEAAI,WAAU;0EACb,cAAA,uQAAC;oEAAK,WAAU;;;;;;;;;;;0EAGlB,uQAAC;gEAAK,WAAU;0EAAc;;;;;;;;;;;;;;;;;8DAGlC,uQAAC;oDAAG,WAAU;8DACX,KAAK,KAAK;;;;;;8DAEb,uQAAC;oDAAG,WAAU;8DACZ,cAAA,uQAAC;wDAAI,WAAU;;0EACb,uQAAC;gEAAM,WAAU;;;;;;0EACjB,uQAAC;gEAAK,WAAU;0EAAiB,KAAK,MAAM,EAAE,OAAO,MAAM;;;;;;;;;;;;;;;;;8DAG/D,uQAAC;oDAAG,WAAU;8DACX,KAAK,MAAM,EAAE,QAAQ;;;;;;8DAExB,uQAAC;oDAAG,WAAU;8DACZ,cAAA,uQAAC;wDAAI,WAAU;;4DACZ,KAAK,IAAI,KAAK,yBACb,uQAAC;gEAAO,WAAU;;;;;;0EAEpB,uQAAC;gEAAK,WAAU;0EAAc,KAAK,IAAI;;;;;;;;;;;;;;;;;8DAG3C,uQAAC;oDAAG,WAAU;8DACX,IAAI,KAAK,KAAK,UAAU,EAAE,kBAAkB;;;;;;;2CAjC1C,KAAK,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4ChC"}}]
